(this.webpackJsonpgiffy=this.webpackJsonpgiffy||[]).push([[0],{125:function(e,t,n){e.exports=n(162)},130:function(e,t,n){},132:function(e,t,n){},162:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(10),o=n.n(c),i=(n(130),n(23)),s=n.n(i),l=n(16),u=n(39),m=(n(132),n(68)),d=n.n(m),g=n(14);function h(e){return p.apply(this,arguments)}function p(){return(p=Object(u.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,e.prev=1,e.next=4,navigator.mediaDevices.getDisplayMedia(t);case 4:n=e.sent,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),console.error("Error: "+e.t0);case 10:return e.abrupt("return",n);case 11:case"end":return e.stop()}}),e,null,[[1,7]])})))).apply(this,arguments)}var f={video:{cursor:"always"},audio:!1},b=function(e){var t=e.chunks,n=e.startTime,c=e.stopTime,o=e.screenWidth,i=e.screenHeight,s=e.onImageComplete,l=e.onImageProgress,u=1024/o*i,m=1*(c-n),g=Math.trunc(5*m/1e3);return Object(a.useEffect)((function(){console.log("Rendering"),l(0),d.a.createGIF({video:t,gifWidth:1024,gifHeight:u,numFrames:g,interval:.2,frameDuration:2,progressCallback:l},(function(e){if(!e.error){var t=e.image;s(t)}}))}),[t]),r.a.createElement(r.a.Fragment,null)},v=function(e){var t=e.chunksUrl;return r.a.createElement("video",{autoPlay:!0,controls:!0,style:{height:"100%"},src:t||void 0})},E=function(){var e=Object(a.useState)(null),t=Object(l.a)(e,2),n=t[0],c=t[1],o=Object(a.useState)([]),i=Object(l.a)(o,2),m=i[0],d=i[1],p=Object(a.useState)(""),E=Object(l.a)(p,2),w=E[0],j=E[1],O=Object(a.useState)(!1),k=Object(l.a)(O,2),y=k[0],S=k[1],I=Object(a.useState)(null),N=Object(l.a)(I,2),x=N[0],D=N[1],R=Object(a.useState)(null),B=Object(l.a)(R,2),C=B[0],T=B[1],F=Object(a.useState)(null),G=Object(l.a)(F,2),H=G[0],W=G[1],M=Object(a.useState)(null),P=Object(l.a)(M,2),U=P[0],A=P[1],J=Object(a.useState)(null),L=Object(l.a)(J,2),V=L[0],$=L[1],_=Object(a.useState)(0),q=Object(l.a)(_,2),z=q[0],K=q[1],Q=function(){var e=Object(u.a)(s.a.mark((function e(){var t,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h(f);case 2:t=e.sent,n=new MediaRecorder(t),S(!0),n.ondataavailable=function(e){return d((function(t){return t.push(e.data),t}))},n.onstop=function(e){S(!1),j(URL.createObjectURL(m[0])),W(t.getVideoTracks()[0].getSettings().width),A(t.getVideoTracks()[0].getSettings().height)},n.start(),D(Date.now()),c(n);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),X=function(){var e=Object(u.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.stop(),T(Date.now());case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"App"},r.a.createElement("main",{className:"bp3-dark"},r.a.createElement(g.Navbar,null,r.a.createElement(g.NavbarGroup,null,r.a.createElement(g.NavbarHeading,null,r.a.createElement("h3",null,"screen2gif")),r.a.createElement(g.Button,{disabled:y,onClick:Q,icon:"record"},"Record"),r.a.createElement(g.Button,{disabled:!y,onClick:X,icon:"stop"},"Stop")),r.a.createElement(g.NavbarGroup,{align:g.Alignment.RIGHT},(1!=z||!V)&&r.a.createElement("div",{style:{width:"10rem"}},r.a.createElement(g.ProgressBar,{value:z})),V&&r.a.createElement(r.a.Fragment,null,r.a.createElement("img",{src:V,width:64}),r.a.createElement(g.AnchorButton,{download:"screen2gif.gif",href:V,target:"_blank"},"Download GIF")),r.a.createElement(g.NavbarDivider,null),"Duration: ",(C-x)/1e3,"s")),r.a.createElement("div",{style:{height:"calc(100vh - 75px)",width:"100vw",backgroundColor:"#293742"}},w?r.a.createElement(v,{chunksUrl:w}):r.a.createElement(g.NonIdealState,{title:"Nothing on tape yet",description:"Record something",icon:"warning-sign",action:y?void 0:r.a.createElement(g.Button,{disabled:y,onClick:Q,icon:"record"},"Record")})),x&&C&&H&&U&&r.a.createElement(b,{chunks:m,startTime:x,stopTime:C,screenWidth:H,screenHeight:U,onImageComplete:$,onImageProgress:K})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(160),n(161);o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(E,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[125,1,2]]]);
//# sourceMappingURL=main.bf84c81f.chunk.js.map
(this.webpackJsonpgiffy=this.webpackJsonpgiffy||[]).push([[0],{126:function(e,t,n){e.exports=n(163)},131:function(e,t,n){},133:function(e,t,n){},163:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(10),o=n.n(c),i=(n(131),n(23)),s=n.n(i),l=n(15),u=n(39),d=(n(133),n(68)),m=n.n(d),g=n(14),h=n(69),f=n.n(h);function b(e){return p.apply(this,arguments)}function p(){return(p=Object(u.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,e.prev=1,e.next=4,navigator.mediaDevices.getDisplayMedia(t);case 4:n=e.sent,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),console.error("Error: "+e.t0);case 10:return e.abrupt("return",n);case 11:case"end":return e.stop()}}),e,null,[[1,7]])})))).apply(this,arguments)}var v={video:{cursor:"always"},audio:!1},j=function(e){var t=e.chunks,n=e.startTime,c=e.stopTime,o=e.screenWidth,i=e.screenHeight,s=e.onImageComplete,l=e.onImageProgress,u=1024/o*i,d=1*(c-n),g=Math.trunc(5*d/1e3);return Object(a.useEffect)((function(){console.log("Rendering"),l(0),m.a.createGIF({video:t,gifWidth:1024,gifHeight:u,numFrames:g,interval:.2,frameDuration:2,progressCallback:l},(function(e){if(!e.error){var t=e.image;s(t)}}))}),[t]),r.a.createElement(r.a.Fragment,null)},w=function(e){var t=e.chunksUrl;return r.a.createElement("video",{autoPlay:!0,controls:!0,style:{maxHeight:"100%",height:"100%",maxWidth:"100%",width:"100%"},src:t||void 0})},O=function(){var e=Object(a.useState)(null),t=Object(l.a)(e,2),n=t[0],c=t[1],o=Object(a.useState)([]),i=Object(l.a)(o,2),d=i[0],m=i[1],h=Object(a.useState)(""),p=Object(l.a)(h,2),O=p[0],E=p[1],k=Object(a.useState)(!1),S=Object(l.a)(k,2),y=S[0],x=S[1],D=Object(a.useState)(!1),I=Object(l.a)(D,2),N=I[0],C=I[1],R=Object(a.useState)(null),T=Object(l.a)(R,2),B=T[0],F=T[1],G=Object(a.useState)(null),H=Object(l.a)(G,2),W=H[0],M=H[1],P=Object(a.useState)(Date.now()),U=Object(l.a)(P,2),A=U[0],J=U[1],L=Object(a.useState)(null),V=Object(l.a)(L,2),$=V[0],_=V[1],q=Object(a.useState)(null),z=Object(l.a)(q,2),K=z[0],Q=z[1],X=Object(a.useState)(null),Y=Object(l.a)(X,2),Z=Y[0],ee=Y[1],te=Object(a.useState)(0),ne=Object(l.a)(te,2),ae=ne[0],re=ne[1],ce=function(){var e=Object(u.a)(s.a.mark((function e(){var t,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b(v);case 2:t=e.sent,n=new MediaRecorder(t),x(!0),n.ondataavailable=function(e){return m((function(t){return t.push(e.data),t}))},n.onstop=function(e){x(!1),C(!0),E(URL.createObjectURL(d[0])),_(t.getVideoTracks()[0].getSettings().width),Q(t.getVideoTracks()[0].getSettings().height)},n.start(),F(Date.now()),c(n);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),oe=function(){var e=Object(u.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.stop(),M(Date.now());case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){setTimeout((function(){return J(Date.now())}),1e3)}),[A]);var ie=((W||A)-(B||A))/1e3;return r.a.createElement("div",{className:"App"},r.a.createElement("main",{className:"bp3-dark"},r.a.createElement(g.Navbar,null,r.a.createElement(g.NavbarGroup,null,r.a.createElement(g.NavbarHeading,null,r.a.createElement("h3",null,"screen2gif")),r.a.createElement(g.Button,{disabled:y,onClick:ce,icon:"record"},"Record"),r.a.createElement(g.Button,{disabled:!y,onClick:oe,icon:"stop"},"Stop")),r.a.createElement(g.NavbarGroup,{align:g.Alignment.RIGHT},N&&r.a.createElement("div",{style:{width:"10rem"}},"Converting to GIF ",r.a.createElement(g.ProgressBar,{value:ae})),Z&&r.a.createElement(r.a.Fragment,null,Z&&Z.length<=1e6&&r.a.createElement("img",{src:Z,width:64}),r.a.createElement(g.AnchorButton,{download:"screen2gif.gif",href:Z,target:"_blank",icon:"download",loading:N,disabled:!Z},"Download GIF")),r.a.createElement(g.NavbarDivider,null),"Duration:"," ",f()(ie>0?ie:0).format("0.0"),"s")),r.a.createElement("div",{style:{height:"calc(100vh - 75px)",width:"100vw",backgroundColor:"#293742"}},O?r.a.createElement(w,{chunksUrl:O}):r.a.createElement(g.NonIdealState,{title:"Nothing on tape yet",description:"Record something",icon:"warning-sign",action:y?void 0:r.a.createElement(g.Button,{disabled:y,onClick:ce,icon:"record"},"Record")})),B&&W&&$&&K&&r.a.createElement(j,{chunks:d,startTime:B,stopTime:W,screenWidth:$,screenHeight:K,onImageComplete:function(e){ee(e),C(!1)},onImageProgress:re})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(161),n(162);o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(O,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[126,1,2]]]);
//# sourceMappingURL=main.caac0003.chunk.js.map
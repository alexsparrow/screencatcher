(this.webpackJsonpgiffy=this.webpackJsonpgiffy||[]).push([[0],{127:function(e,t,a){e.exports=a(164)},132:function(e,t,a){},134:function(e,t,a){},164:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(11),o=a.n(c),i=(a(132),a(25)),l=a.n(i),s=a(15),u=a(41),d=(a(134),a(72)),m=a.n(d),g=a(12),h=a(73),b=a.n(h);function f(e){return p.apply(this,arguments)}function p(){return(p=Object(u.a)(l.a.mark((function e(t){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=null,e.prev=1,e.next=4,navigator.mediaDevices.getDisplayMedia(t);case 4:a=e.sent,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),console.error("Error: "+e.t0);case 10:return e.abrupt("return",a);case 11:case"end":return e.stop()}}),e,null,[[1,7]])})))).apply(this,arguments)}var v={video:{cursor:"always"},audio:!1},j=function(e){var t=e.chunks,a=e.startTime,c=e.stopTime,o=e.screenWidth,i=e.screenHeight,l=e.onImageComplete,s=e.onImageProgress,u=e.gifWidth,d=u/o*i,g=1*(c-a),h=Math.trunc(5*g/1e3);return Object(n.useEffect)((function(){console.log("Rendering"),s(0),m.a.createGIF({video:t,gifWidth:u,gifHeight:d,numFrames:h,interval:.2,frameDuration:2,progressCallback:s},(function(e){if(!e.error){var t=e.image;l(t)}}))}),[t]),r.a.createElement(r.a.Fragment,null)},O=function(e){var t=e.chunksUrl;return r.a.createElement("video",{autoPlay:!0,controls:!0,style:{maxHeight:"100%",height:"100%",maxWidth:"100%",width:"100%"},src:t||void 0})},E=function(){var e=Object(n.useState)(null),t=Object(s.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)([]),i=Object(s.a)(o,2),d=i[0],m=i[1],h=Object(n.useState)(""),p=Object(s.a)(h,2),E=p[0],w=p[1],S=Object(n.useState)(!1),k=Object(s.a)(S,2),y=k[0],x=k[1],D=Object(n.useState)(!1),I=Object(s.a)(D,2),N=I[0],C=I[1],W=Object(n.useState)(null),R=Object(s.a)(W,2),T=R[0],B=R[1],F=Object(n.useState)(null),G=Object(s.a)(F,2),H=G[0],M=G[1],P=Object(n.useState)(Date.now()),U=Object(s.a)(P,2),A=U[0],L=U[1],z=Object(n.useState)(1024),J=Object(s.a)(z,2),V=J[0],$=J[1],_=Object(n.useState)(null),q=Object(s.a)(_,2),K=q[0],Q=q[1],X=Object(n.useState)(null),Y=Object(s.a)(X,2),Z=Y[0],ee=Y[1],te=Object(n.useState)(null),ae=Object(s.a)(te,2),ne=ae[0],re=ae[1],ce=Object(n.useState)(0),oe=Object(s.a)(ce,2),ie=oe[0],le=oe[1],se=function(){var e=Object(u.a)(l.a.mark((function e(){var t,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f(v);case 2:t=e.sent,a=new MediaRecorder(t),x(!0),a.ondataavailable=function(e){return m((function(t){return t.push(e.data),t}))},a.onstop=function(e){x(!1),C(!0),w(URL.createObjectURL(d[0])),Q(t.getVideoTracks()[0].getSettings().width),ee(t.getVideoTracks()[0].getSettings().height)},a.start(),B(Date.now()),c(a);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ue=function(){var e=Object(u.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.stop(),M(Date.now());case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){setTimeout((function(){return L(Date.now())}),1e3)}),[A]);var de=((H||A)-(T||A))/1e3;return r.a.createElement("div",{className:"App"},r.a.createElement("main",{className:"bp3-dark"},r.a.createElement(g.Navbar,null,r.a.createElement(g.NavbarGroup,null,r.a.createElement(g.NavbarHeading,null,r.a.createElement("h3",null,"screen2gif")),r.a.createElement(g.Button,{disabled:y,onClick:se,icon:"record"},"Record"),r.a.createElement(g.Button,{disabled:!y,onClick:ue,icon:"stop"},"Stop"),r.a.createElement(g.NavbarDivider,null),"Width (px)",r.a.createElement("div",{style:{paddingLeft:"1rem"}},r.a.createElement(g.Slider,{min:256,max:2048,stepSize:256,labelStepSize:512,onChange:$,value:V}))),r.a.createElement(g.NavbarGroup,{align:g.Alignment.RIGHT},N&&r.a.createElement("div",{style:{width:"10rem"}},"Converting to GIF ",r.a.createElement(g.ProgressBar,{value:ie})),ne&&r.a.createElement(r.a.Fragment,null,ne&&ne.length<=1e6&&r.a.createElement("img",{src:ne,width:64}),r.a.createElement(g.AnchorButton,{download:"screen2gif.gif",href:ne,target:"_blank",icon:"download",loading:N,disabled:!ne},"Download GIF")),r.a.createElement(g.NavbarDivider,null),"Duration:"," ",b()(de>0?de:0).format("0.0"),"s")),r.a.createElement("div",{style:{height:"calc(100vh - 75px)",width:"100vw",backgroundColor:"#293742"}},E?r.a.createElement(O,{chunksUrl:E}):r.a.createElement(g.NonIdealState,{title:"Nothing on tape yet",description:"Record something",icon:"warning-sign",action:y?void 0:r.a.createElement(g.Button,{disabled:y,onClick:se,icon:"record"},"Record")})),T&&H&&K&&Z&&r.a.createElement(j,{chunks:d,startTime:T,stopTime:H,screenWidth:K,screenHeight:Z,onImageComplete:function(e){re(e),C(!1)},onImageProgress:le,gifWidth:V})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(162),a(163);o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(E,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[127,1,2]]]);
//# sourceMappingURL=main.caadf9ab.chunk.js.map